(function(){var e={};var t=null;var n=null;var r=null;var i=null;var s={};var o=window.devicePixelRatio||1;var u=16*o;var a={width:7,height:9,font:10*o+"px arial",colour:"#ffffff",background:"#F03D25",fallback:true,crossOrigin:true,abbreviate:true};var f=function(){var e=navigator.userAgent.toLowerCase();return function(t){return e.indexOf(t)!==-1}}();var l={ie:f("msie"),chrome:f("chrome"),webkit:f("chrome")||f("safari"),safari:f("safari")&&!f("chrome"),mozilla:f("mozilla")&&!f("chrome")&&!f("safari")};var c=function(){var e=document.getElementsByTagName("link");for(var t=0,n=e.length;t<n;t++){if((e[t].getAttribute("rel")||"").match(/\bicon\b/)){return e[t]}}return false};var h=function(){var e=document.getElementsByTagName("link");var t=document.getElementsByTagName("head")[0];for(var n=0,r=e.length;n<r;n++){var i=typeof e[n]!=="undefined";if(i&&(e[n].getAttribute("rel")||"").match(/\bicon\b/)){t.removeChild(e[n])}}};var p=function(){if(!n||!t){var e=c();n=t=e?e.getAttribute("href"):"/favicon.ico"}return t};var d=function(){if(!i){i=document.createElement("canvas");i.width=u;i.height=u}return i};var v=function(e){h();var t=document.createElement("link");t.type="image/x-icon";t.rel="icon";t.href=e;document.getElementsByTagName("head")[0].appendChild(t)};var m=function(e){if(window.console)window.console.log(e)};var g=function(e,t){if(!d().getContext||l.ie||l.safari||s.fallback==="force"){return y(e)}var n=d().getContext("2d");var t=t||"#000000";var i=p();r=document.createElement("img");r.onload=function(){n.clearRect(0,0,u,u);n.drawImage(r,0,0,r.width,r.height,0,0,u,u);if((e+"").length>0)b(n,e,t);w()};r.onerror=function(){s.fallback="force"};if(!i.match(/^data/)&&s.crossOrigin){r.crossOrigin="anonymous"}r.src=i};var y=function(e){if(s.fallback){var t=document.title;if(t[0]==="("){t=t.slice(t.indexOf(" "))}if((e+"").length>0){document.title="("+e+") "+t}else{document.title=t}}};var b=function(e,t,n){if(typeof t=="number"&&t>99&&s.abbreviate){t=E(t)}var r=(t+"").length-1;var i=s.width*o+6*o*r,a=s.height*o;var f=u-a,c=u-i-o,h=16*o,p=16*o,d=2*o;e.font=(l.webkit?"bold ":"")+s.font;e.fillStyle=s.background;e.strokeStyle=s.background;e.lineWidth=o;e.beginPath();e.moveTo(c+d,f);e.quadraticCurveTo(c,f,c,f+d);e.lineTo(c,h-d);e.quadraticCurveTo(c,h,c+d,h);e.lineTo(p-d,h);e.quadraticCurveTo(p,h,p,h-d);e.lineTo(p,f+d);e.quadraticCurveTo(p,f,p-d,f);e.closePath();e.fill();e.beginPath();e.strokeStyle="rgba(0,0,0,0.3)";e.moveTo(c+d/2,h);e.lineTo(p-d/2,h);e.stroke();e.fillStyle=s.colour;e.textAlign="right";e.textBaseline="top";e.fillText(t,o===2?29:15,l.mozilla?7*o:6*o)};var w=function(){if(!d().getContext)return;v(d().toDataURL())};var E=function(e){var t=[["G",1e9],["M",1e6],["k",1e3]];for(var n=0;n<t.length;++n){if(e>=t[n][1]){e=S(e/t[n][1])+t[n][0];break}}return e};var S=function(e,t){var n=new Number(e);return n.toFixed(t)};e.setOptions=function(e){s={};for(var t in a){s[t]=e.hasOwnProperty(t)?e[t]:a[t]}return this};e.setImage=function(e){t=e;w();return this};e.setBubble=function(e,t){e=e||"";g(e,t);return this};e.reset=function(){v(n)};e.setOptions(a);window.Tinycon=e;if(typeof define==="function"&&define.amd){define(e)}})()